datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  @@map(name: "users")
  id Int @id @default(autoincrement())
  psnId String @unique @map("psnid")
}

// 後でこちらに変更したい
// model User {
//   @@map(name: "users")
//   id Int @id @default(autoincrement())
//   psnId String @unique @map(name: "psn_id")
//   scoreLogs ScoreLog[]
//   createdAt DateTime @default(now()) @map(name: "created_at")
//   updatedAt DateTime @updatedAt @map(name: "updated_at")
// }

// 後でScoreLogに置き換えたい
model userData {
  @@map(name: "userdata")
  @@unique([userId, date]) // uniqueになるカラムが必要なのでこうしたが、運用中のDBがそうなっているのか心配
  user User @relation(fields: [userId], references: [id])
  userId Int @map("userid")
  rankScore Int @map("rankscore")
  date Int
}

model ScoreLog {
  @@map(name: "score_logs")
  id Int @id @default(autoincrement())
  user User @relation(fields: [userId], references: [id])
  userId Int @map(name: "user_id")
  rankScore Int @map(name: "rank_score")
  createdAt DateTime @default(now()) @map(name: "created_at")
  updatedAt DateTime @updatedAt @map(name: "updated_at")
}
